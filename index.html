<!DOCTYPE html>
<html>
<head>
<title>MiniSearch Example</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/minisearch@7.1.0/dist/umd/index.min.js"></script>
<style>
  #results {
    list-style: none;
    padding: 0;
  }
  #results li {
    margin-bottom: 5px;
  }
</style>
</head>
<body>
<input type="text" class="Search" placeholder="Search...">
<ul id="results"></ul>

<script>
const $searchInput = document.querySelector(".Search");
const $results = document.getElementById("results");

const arr = [
{
"id":123456,
  "p": [
    {
      "b": {
        "span": {

          "@style": "color:black; font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: x-large;",
          "#text": "Руководство пользователя по работе в Личном кабинете (ЛК)"
        }
      }
    },
    {
      "@style": "border:none;mso-border-bottom-alt:solid windowtext .75pt;padding:0cm;mso-padding-alt:0cm 0cm 12.0pt 0cm",
      "@class": "MsoNormal",
      "a": {
        "@href": "javascript:void(scrollIntoView(#top))",
        "strong": {
          "span": {

            "@style": "font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;",
            "#text": "1. Первичный вход в личный кабинет"
          }
        }
      }
    },
    {
      "a": {
        "@href": "javascript:void(scrollIntoView(#top1))",
        "strong": {
          "span": {

            "@style": "font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;",
            "#text": "2. Настройка ЭЦП"
          }
        }
      }
    },
    {
      "a": {
        "@href": "javascript:void(scrollIntoView(#top2))",
        "strong": {
          "span": {

            "@style": "font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;",
            "#text": "3. Работа с поручениями в ЛК"
          }
        }
      }
    },
    {
      "@style": "border:none;mso-border-bottom-alt:solid windowtext .75pt;padding:0cm;mso-padding-alt:0cm 0cm 12.0pt 0cm",
      "@class": "MsoNormal",
      "span": {
        "@style": "mso-spacerun:yes; font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;"
      },
      "a": {
        "@href": "javascript:void(scrollIntoView(#top3))",
        "strong": {
          "span": {

            "@style": "font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;",
            "#text": "3.1 Описание работы в табличной форме с группой случаев, входящих в поручение"
          }
        }
      }
    },
    {
      "@style": "border:none;mso-border-bottom-alt:solid windowtext .75pt;padding:0cm;mso-padding-alt:0cm 0cm 12.0pt 0cm",
      "@class": "MsoNormal",
      "span": {
        "@style": "mso-spacerun:yes; font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;"
      },
      "a": {
        "@href": "javascript:void(scrollIntoView(#top4))",
        "strong": {
          "span": {

            "@style": "font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;",
            "#text": "3.2 Описание заполнения формы Экспертное заключение"
          }
        }
      }
    },
    {
      "span": {
        "@style": "mso-spacerun:yes; font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;"
      },
      "a": {
        "@href": "javascript:void(scrollIntoView(#top5))",
        "strong": {
          "span": {

            "@style": "font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;",
            "#text": "3.3 Завершение работы с ЭЗ в ЛК"
          }
        }
      }
    },
    {
      "a": {
        "@href": "javascript:void(scrollIntoView(#top6))",
        "strong": {
          "span": {

            "@style": "font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;",
            "#text": "3.4 Автоматическое и ручное формирование пакета документов (Заключение экспертизы, реестр заключений, Экспертное заключение) на стороне ПП 1С и отправка в ЛК эксперту на подписание ЭЦП."
          }
        }
      }
    },
    {
      "a": {
        "@href": "javascript:void(scrollIntoView(#top7))",
        "strong": {
          "span": {

            "@style": "font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;",
            "#text": "3.5 Внесение изменений в Экспертное заключение после перевода в статус «Выполнено» -перевод ЭЗ в статус «Возвращено в работу» со стороны ПП 1С"
          }
        }
      }
    },
    {
      "a": {
        "@href": "javascript:void(scrollIntoView(#top8))",
        "strong": {
          "span": {

            "@style": "font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;",
            "#text": "3.6 Отчеты"
          }
        }
      }
    },
    {
      "@style": "border:none;mso-border-bottom-alt:solid windowtext .75pt;padding:0cm;mso-padding-alt:0cm 0cm 12.0pt 0cm",
      "@class": "MsoNormal",
      "a": {
        "@href": "javascript:void(scrollIntoView(#top9))",
        "strong": {
          "span": {

            "@style": "font-size: large; font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif;",
            "#text": "4. Выход из ЛК"
          }
        }
      }
    },
    {
      "@style": "border:none;mso-border-bottom-alt:solid windowtext .75pt;padding:0cm;mso-padding-alt:0cm 0cm 12.0pt 0cm",
      "@class": "MsoNormal",
      "a": {
        "@href": "javascript:void(scrollIntoView(#top10))",
        "strong": {
          "span": {

            "@style": "font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;",
            "#text": "5. Повторный вход в ЛК"
          }
        }
      }
    },
    {
      "a": {
        "@href": "javascript:void(scrollIntoView(#top11))",
        "strong": {
          "span": {

            "@style": "font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;",
            "#text": "6. Руководство пользователя"
          }
        }
      }
    },
    {
      "@style": "border:none;mso-border-bottom-alt:solid windowtext .75pt;padding:0cm;mso-padding-alt:0cm 0cm 12.0pt 0cm",
      "@class": "MsoNormal",
      "br": [
        {
          "@class": "ProseMirror-trailingBreak"
        },
        {
          "@class": "ProseMirror-trailingBreak"
        },
        {
          "@class": "ProseMirror-trailingBreak"
        },
        {
          "@class": "ProseMirror-trailingBreak"
        },
        {
          "@class": "ProseMirror-trailingBreak"
        },
        {
          "@class": "ProseMirror-trailingBreak"
        }
      ]
    },
    {
      "@style": "border:none;mso-border-bottom-alt:solid windowtext .75pt;padding:0cm;mso-padding-alt:0cm 0cm 12.0pt 0cm",
      "@class": "MsoNormal",
      "b": {
        "u": {
          "span": {
"id":13,
            "@style": "color:black; font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: x-large;",
            "#text": "1. Первичный вход в личный кабинет"
          }
        }
      }
    },
    {
      "@style": "border:none;mso-border-bottom-alt:solid windowtext .75pt;padding:0cm;mso-padding-alt:0cm 0cm 12.0pt 0cm",
      "@class": "MsoNormal",
      "span": [
        {
          "@style": "font-size:10.0pt;font-family:&quot;Times New Roman&quot;,serif;color:black"
        },
        {

          "@style": "color:black; font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;",
          "#text": "Первичный вход в ЛК происходит только по ссылке на электронной почте, врачу-эксперту приходит с��общение"
        }
      ]
    },
    {
      "@style": "border:none;mso-border-bottom-alt:solid windowtext .75pt;padding:0cm;mso-padding-alt:0cm 0cm 12.0pt 0cm",
      "@class": "MsoNormal",
      "span": {

        "@style": "color:black; font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;",
        "#text": "с ссылкой"
      },
      "b": {
        "span": {

          "@style": "font-family: TimesNewRoman,&quot;Times New Roman&quot;,Times,Baskerville,Georgia,serif; font-size: large;",
          "#text": "«перейти в личный кабинет»"
        }
      }
    },
    {
      "@style": "border:none;mso-border-bottom-alt:solid windowtext .75pt;padding:0cm;mso-padding-alt:0cm 0cm 12.0pt 0cm",
      "@class": "MsoNormal",
      "span": {
        "@style": "font-size:10.0pt;font-family:&quot;Times New Roman&quot;,serif"
      }
    }
  ],
  "div": {
    "@id": "#top"
  },
  "#text": [
    "'",
    "'"
  ]
}
];

let miniSearch = new MiniSearch({
  fields: ["p.0.b.span.#text", "p.1.a.strong.span.#text", "p.2.a.strong.span.#text", "p.3.a.strong.span.#text"],
  extractField: (doc, fieldName) => {
    const parts = fieldName.split(".");
    let value = doc;
    for (const part of parts) {
      if (value && value.hasOwnProperty(part)) {
        value = value[part];
      } else {
        return ""; // Handle missing fields gracefully
      }
      if (typeof value === 'object' && value.hasOwnProperty('#text')) {
        value = value['#text'];
      }
    }
    return value;
  }
});

miniSearch.addAll(arr);

$searchInput.addEventListener("input", (event) => {
  const query = $searchInput.value;
  const results = (query.length > 0) ? miniSearch.search(query) : []; //Simplified search call
  renderSearchResults(results);
});


const renderSearchResults = (results) => {
  $results.innerHTML = '';
  results.forEach(result => {
    const li = document.createElement('li');
    li.textContent = result.p.map(item => item.a?.strong?.span?.['#text'] || item.b?.span?.['#text']).join('\n');
    $results.appendChild(li);
  });
};

</script>
</body>
</html>
